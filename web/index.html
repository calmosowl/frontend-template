<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>counter</title>
	<link href="css/style.css" rel="stylesheet">
	<script src="js/counter.js"></script>
</head>

<body style="margin: 0;">
	<header id="topPanel">
		
	</header>
	<main>
	</main>
<script>
"use strict";
document.addEventListener("DOMContentLoaded", (ev) => {
	(()=>{

	let panel = new WidgetTopPanel({
		container: 'topPanel', // id элемента в который будет добавлен виджет
		left     : '0.00 EUR', // надпись слева
		right    : 'GO', // надпись справа
		
		/* json, содержащий опции для счетчиков. Перечисленные счетчики будут добавлены в виджет при инициализации. * /
		counters : '[\
				{"id": 1, "jackName": "j-1", "amount": 0, "currency": "", "tickLength": 10000},\
				{"id": 2, "jackName": "j-2", "amount": 0, "currency": "", "tickLength": 10000}\
				]'
		// */

	});panel.init();



	/* Метод update(json) обновляет свойство "amount" существующих счетчиков, добавляет новый счетчик */
	//panel.update('[{"id": 1, "amount": 1.00}, {"id": 2, "amount": 2.00}, {"id": 9, "amount": 9.00}]');

	function randomInteger(min, max) {
    	let rand = min + Math.random()*(max-1); // 0.5 + Math.random() * (max - min + 1);
    	return Math.round(rand);
 	}

 let num=0;
 let a = new JackPotCounter({
     id: 1,
     value: 0
 });
	function updateTEST(){
		setTimeout(function(){console.log("\n=== " + num + " ===");
			a.setCurrentValue(a.currentValue + randomInteger(1,100));
			
			num+=1;
			if(num<10)	
				updateTEST();
			
		}, randomInteger(1000,3000));
	};
	
updateTEST();


	})();
}, false);
</script>
</body>
</html>