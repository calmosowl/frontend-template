<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>counter</title>
	<link href="css/style.css" rel="stylesheet">
	<script src="js/counter.js"></script>
</head>

<body style="margin: 0;">
	<header>
			<!-- Widget -->
			<div class="jptb-top-panel-wrapper">
				<div class="jptb-top-panel">
					<div class="jptb-left">
						535.98 EUR
					</div>
					<div class="jptb-center">
						
					</div>
					<div class="jptb-right">
						last jackpot: 07/05/17
					</div>
				</div>
			</div>
			<script>
		
		
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = function() {
		    if (this.readyState == 4 && this.status == 200) {
		        var a = new JackPotCounter(JSON.parse(this.responseText));
		        console.dir(a);
		    }
		};
		xmlhttp.open("GET", "json_demo.txt", true);
		xmlhttp.send();
		
		</script>
		
		<script>
		"use strict";
		document.addEventListener("DOMContentLoaded", (ev) => {
			(()=>{
		
		// let a = new JackPotCounter({
		// 			myObj
		// 		});
		
				// let a = new JackPotCounter({
				// 	jackName	: 'JackPot ðŸ¦‰',
				// 	tickLength	: 5000,
				// 	value  		: 0.1,
				// 	numRolls	: 7
				// });
		
				// let b = new JackPotCounter({
				// 	jackName	: 'JackPot ðŸ§',
				// 	tickLength	: 10000,
				// 	value  		: 0,
				// 	numRolls	: 7
				// });
		
				// let c = new JackPotCounter({
				// 	jackName	: 'JackPot ðŸ˜',
				// 	tickLength	: 5000,
				// 	value  		: 0,
				// 	numRolls	: 7
				// });
		
				// let d = new JackPotCounter({
				// 	jackName	: 'JackPot ðŸŽ°',
				// 	tickLength	: 5000,
				// 	value  		: 0,
				// 	numRolls	: 7
				// });
		
		/*	slider	*/
				const parent = document.querySelector('.jptb-center');
				const widgetHeight = parent.clientHeight;
		
					var	arr = Array.from(document.querySelectorAll('.jptb-jackpot-item')),
						parentWidth = parent.clientWidth,
						itemsWidth = arr.reduce(function(sum, current) {
							return sum + current.clientWidth;
						}, 0);
		
				var scrollHeight = +parent.scrollHeight;
				
				let slider = (y) => {
					if(itemsWidth > parent.clientWidth) {
						if (y < scrollHeight) {
							parent.style.transform = "translateY(-" + y + "px)";
							y += 40;
							setTimeout(slider, 8000, y);
						} else goDown(y - 40);
					}
				}
				//slider(0);
		
				function goDown(y) {
					if ( y > 0 ) {
						parent.style.transform = "translateY(-" + y + "px)";
						y += -40;
					setTimeout(goDown, 8000, y);	
					} else slider(0);
				}
		/*	/slider	*/
		//b.winpanelAnimate();
		/*  for test  */		
				var input = document.getElementById('r'),
					inputZ = document.getElementById('z');
		
				input.oninput = () => {
					a.setCurrentValue(input.value);
					a.run();
				};
				inputZ.oninput = () => {
					b.setCurrentValue(inputZ.value);
					b.run();
				};
		/*  /for test  */	
					
			})();
		}, false);
		</script>
		<!-- Widget -->
	</header>
	<main>
		<!-- for test -->
	<form oninput="x.value=r.value">
		<input id="r" type="range" min="0" max="1" step="0.01" value="0">
		<output id="x" name="x" for="r">0</output>
	</form>
	<form oninput="y.value=z.value">
		<input id="z" type="range" min="0" max="10" step="0.1" value="0">
		<output id="y" name="y" for="z">0</output>
	</form>
	<!-- /for test -->
	</main>
</body>
</html>