<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>counter</title>
	<link href="css/style.css" rel="stylesheet">
	<script src="js/counter.js"></script>
</head>

<body style="margin: 0;">
	<header>
		<script>
		"use strict";
		document.addEventListener("DOMContentLoaded", (ev) => {
			(()=>{
		
		/*var myMessage = '{"counters":[\
			{"jackName": "JackPot 1","tickLength": 10000,"value": 0, "numRolls": 7},\
			{"jackName": "JackPot 2","tickLength": 10000,"value": 0, "numRolls": 7},\
			{"jackName": "JackPot 3","tickLength": 10000,"value": 0, "numRolls": 7},\
			{"jackName": "JackPot 4","tickLength": 10000,"value": 0, "numRolls": 7}\
			]\
		}';
		
		var jsonData = JSON.parse(myMessage);
		for (var i = 0; i < jsonData.counters.length; i++) {
		    objFromArray(jsonData.counters[i]);
		}
		
		function objFromArray(obj) {
			return new JackPotCounter(obj);
		}*/
		
		
		// var a;
		// var xmlhttp = new XMLHttpRequest();
		// var myObject = JSON.parse(this.responseText);
		// xmlhttp.onreadystatechange = function() {
		//     if (this.readyState == 4 && this.status == 200) {
		//         return new JackPotCounter(JSON.parse(this.responseText));
		//     }
		// };
		// xmlhttp.open("GET", "json_demo.txt", true);
		// xmlhttp.send();
				new WidgetTopPanel({
					container: 'header',
					left: '0.00 EUR',
					right: 'GO',
					counters: '{\
						"a": {"jackName": "JackPot 1", "amount": 0, "currency": "EUR", "tickLength": 10000, "numRolls": 7},\
						"b": {"jackName": "JackPot 2", "amount": 0, "currency": "USD", "tickLength": 10000, "numRolls": 7},\
						"c": {"jackName": "JackPot 3", "amount": 0, "currency": "EUR", "tickLength": 10000, "numRolls": 7},\
						"d": {"jackName": "JackPot 4", "amount": 0, "currency": "EUR", "tickLength": 10000, "numRolls": 7}\
						}'
				}).init();
				
		
				// let a = new JackPotCounter({
				// 	jackName	: 'JackPot ðŸ¦‰',
				// 	tickLength	: 5000,
				// 	value  		: 0.1,
				// 	currency	: 'EUR'
				// });
		
				// let b = new JackPotCounter({
				// 	jackName	: 'JackPot ðŸ§',
				// 	tickLength	: 10000,
				// 	value  		: 0,
				// 	currency	: 'USD'
				// });
		
				// let c = new JackPotCounter({
				// 	jackName	: 'JackPot ðŸ˜',
				// 	tickLength	: 5000,
				// 	value  		: 0,
				// 	currency	: 'USD'
				// });
		
				// let d = new JackPotCounter({
				// 	jackName	: 'JackPot ðŸŽ°',
				// 	tickLength	: 5000,
				// 	value  		: 0,
				// 	currency	: 'USD'
				// });
		
		/*	slider	*/
				// const parent = document.querySelector('.jptb-center');
				// const widgetHeight = parent.clientHeight;
		
				// 	var	arr = Array.from(document.querySelectorAll('.jptb-jackpot-item')),
				// 		parentWidth = parent.clientWidth,
				// 		itemsWidth = arr.reduce(function(sum, current) {
				// 			return sum + current.clientWidth;
				// 		}, 0);
		
				// var scrollHeight = +parent.scrollHeight;
				
				// let slider = (y) => {
				// 	if(itemsWidth > parent.clientWidth) {
				// 		if (y < scrollHeight) {
				// 			parent.style.transform = "translateY(-" + y + "px)";
				// 			y += 40;
				// 			setTimeout(slider, 8000, y);
				// 		} else goDown(y - 40);
				// 	}
				// }
				//slider(0);
		
				// function goDown(y) {
				// 	if ( y > 0 ) {
				// 		parent.style.transform = "translateY(-" + y + "px)";
				// 		y += -40;
				// 	setTimeout(goDown, 8000, y);	
				// 	} else slider(0);
				// }
		/*	/slider	*/
		//b.winpanelAnimate();
		/*  for test  */		
				var input = document.getElementById('r'),
					inputZ = document.getElementById('z');
		
				input.oninput = () => {
					a.setCurrentValue(input.value);
					a.run();
				};
				inputZ.oninput = () => {
					b.setCurrentValue(inputZ.value);
					b.run();
				};
		/*  /for test  */	
					
			})();
		}, false);
		</script>
	</header>
	<main>
		<!-- for test -->
	<form oninput="x.value=r.value">
		<input id="r" type="range" min="0" max="1" step="0.01" value="0">
		<output id="x" name="x" for="r">0</output>
	</form>
	<form oninput="y.value=z.value">
		<input id="z" type="range" min="0" max="10" step="0.1" value="0">
		<output id="y" name="y" for="z">0</output>
	</form>
	<!-- /for test -->
	</main>
</body>
</html>